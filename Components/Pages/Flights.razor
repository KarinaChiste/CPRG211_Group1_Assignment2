@page "/flights"
@using CPRG211_Group1_Assignment2.Classes

<div class="text-center">
    <h5>Flight Finder</h5>
</div>

<form class="d-flex gap-4">

    <div class="form-group flex-grow-1">
        <label for="from">From:</label>
        <input @bind="from" type="text" class="form-control" placeholder="Any">
    </div>
    <div class="form-group flex-grow-1">
        <label for="to">To:</label>
        <input @bind="to" type="text" class="form-control" placeholder="Any">
    </div>
    <div class="form-group flex-grow-1">
        <label for="day">Day:</label>
        <input @bind="day" type="text" class="form-control" placeholder="Any">
    </div>
    <div class="align-self-end flex-grow-1" style="width: 190px;">
        <button type="button" class="btn btn-primary w-100" @onclick="FindFlights"
        style="white-space: nowrap;">Find flights</button>
    </div>

</form>

<div class="text-center mt-4">
    <h5>Flights</h5>
</div>

<div class="form-group">
    <select class="form-select">
        @foreach (Flight flight in flights)
        {
            <option selected value="@flight">@flight.ToString()</option>

            flightCode = flight.FlightCode;
            airline = flight.Airline;
            day = flight.Day;
            time = flight.DepartureTime;
            cost = flight.Price;



        }
     
    </select>

</div>

<div class="text-center mt-4">
    <h5>Reserve</h5>
</div>

<div>
    <label for="FlightCode">Flight code:</label>
    <input type="text" readonly placeholder="Flight" style="width:100%" name="flightCode" value="@flightCode"  />
</div>

<div>
    <label>Airline:</label>
    <input type="text" readonly placeholder="Airline" style="width:100%"  name="airline" value="@airline"/>
</div>

<div>
    <label>Day:</label>
    <input type="text" readonly placeholder="Day" style="width:100%" name="day" value="@day" />
</div>

<div>
    <label>Time:</label>
    <input type="text" readonly placeholder="Time" style="width:100%" name="time" value="@time"/>
</div>

<div>
    <label>Cost:</label>
    <input type="text" readonly placeholder="0" style="width:100%" name="cost" value="@cost" />
</div>

<div>
    <label>Name:</label>
    <input type="text" placeholder="Name" style="width:100%" name="name" />
</div>

<div>
    <label>Citizenship:</label>
    <input type="text" placeholder="Citizenship" style="width:100%" name="citizenship"/>
</div>

<div style="width: 25%; align-self:center; ">
    <button type="submit" class="btn btn-primary w-100 " style="width:25%">Reserve</button>
</div>



@code {
    private string from;
    private string to;
    private string day;

    private string flightCode;
    private string airline;
    private string time;
    private string cost;

    private FlightSearch flightSearch = new FlightSearch();
    private List<Flight> flights = new List<Flight>();

    private void FindFlights()
    {
        flights = FlightSearch.GetFlights().Where(item =>
               (string.IsNullOrWhiteSpace(from) || item.OriginAirport.Equals(from, StringComparison.OrdinalIgnoreCase)) &&
               (string.IsNullOrWhiteSpace(to) || item.DestAirport.Equals(to, StringComparison.OrdinalIgnoreCase)) &&
               (string.IsNullOrWhiteSpace(day) || item.Day.Equals(day, StringComparison.OrdinalIgnoreCase))
               ).ToList();
    }

    private void NewFlightReservation()
    {
        

    }


}  





