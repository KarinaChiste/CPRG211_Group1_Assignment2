@page "/flights"
@using CPRG211_Group1_Assignment2.Classes

<div class="text-center">
    <h5>Flight Finder</h5>
</div>

<form class="d-flex gap-4">

    <div class="form-group flex-grow-1">
        <label for="from">From:</label>
        <input @bind="from" type="text" class="form-control" placeholder="Any">
    </div>
    <div class="form-group flex-grow-1">
        <label for="to">To:</label>
        <input @bind="to" type="text" class="form-control" placeholder="Any">
    </div>
    <div class="form-group flex-grow-1">
        <label for="day">Day:</label>
        <input @bind="day" type="text" class="form-control" placeholder="Any">
    </div>
    <div class="align-self-end flex-grow-1" style="width: 190px;">
        <button type="button" class="btn btn-primary w-100" @onclick="FindFlights"
        style="white-space: nowrap;">Find flights</button>
    </div>

</form>

<div class="text-center mt-4">
    <h5>Flights</h5>
</div>
<div class="form-group">
    <select class="form-select">
        @foreach (Flight flight in flights)
        {
            <option value="@flight">@flight.ToString()</option>
        }
    </select>

</div>

@code {
    private string from;
    private string to;
    private string day;

    private FlightSearch flightSearch = new FlightSearch();
    private List<Flight> flights = new List<Flight>();

    private void FindFlights()
    {
        flights = FlightSearch.GetFlights().Where(item =>
		       (string.IsNullOrWhiteSpace(from) || item.OriginAirport.Equals(from, StringComparison.OrdinalIgnoreCase)) &&
		       (string.IsNullOrWhiteSpace(to) || item.DestAirport.Equals(to, StringComparison.OrdinalIgnoreCase)) &&
		       (string.IsNullOrWhiteSpace(day) || item.Day.Equals(day, StringComparison.OrdinalIgnoreCase))
		       ).ToList();
	}
}  





